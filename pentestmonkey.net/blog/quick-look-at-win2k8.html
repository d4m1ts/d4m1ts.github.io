<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>A Quick Look at Windows 2008 Server Beta | pentestmonkey</title>
<link rel="stylesheet" href="../wp-content/themes/baza-noclegowa/style.css" type="text/css" media="screen" />
<link rel="pingback" href="https://pentestmonkey.net/xmlrpc.php" />
<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='https://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="pentestmonkey &raquo; Feed" href="../feed" />
<link rel="alternate" type="application/rss+xml" title="pentestmonkey &raquo; Comments Feed" href="../comments/feed" />
<link rel="alternate" type="application/rss+xml" title="pentestmonkey &raquo; A Quick Look at Windows 2008 Server Beta Comments Feed" href="quick-look-at-win2k8/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/pentestmonkey.net\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.8.3"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='../wp-includes/css/dist/block-library/style.min.css%3Fver=5.8.3.css' type='text/css' media='all' />
<link rel="https://api.w.org/" href="../wp-json/index.html" /><link rel="alternate" type="application/json" href="../wp-json/wp/v2/posts/27" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<link rel="canonical" href="../index.html%3Fp=27.html" />
<link rel='shortlink' href='../index.html%3Fp=27.html' />
<link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embed%3Furl=https:%252F%252Fpentestmonkey.net%252Fblog%252Fquick-look-at-win2k8" />
<link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed%3Furl=https:%252F%252Fpentestmonkey.net%252Fblog%252Fquick-look-at-win2k8&amp;format=xml" />
	
<!--[if IE 6]><script src="https://pentestmonkey.net/wp-content/themes/baza-noclegowa/js/DD_belatedPNG.js"></script><![endif]-->
</head>
<body class="post-template-default single single-post postid-27 single-format-standard">
	<div class="all-page">
		
		<div class="container">
			
			<!-- HEADER -->
			<div id="header">
			    <div class="website-name"><a href="../index.html">pentestmonkey</a></div>
				<div class="slogan">Taking the monkey work out of pentesting</div>
			</div>
			<div class="clear"></div>
			<!-- /HEADER -->

			<!-- main NAVIGATION -->
			<div id="mainNav">
				<div class="wrap">
    <ul id="menu-cheat-sheets" class="menu"><li id="menu-item-133" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-133"><a href="../category/site-news.html"><span>Site News</span></a></li>
<li id="menu-item-130" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-130"><a href="../category/blog/index.html"><span>Blog</span></a></li>
<li id="menu-item-136" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-136"><a href="../category/tools/index.html"><span>Tools</span></a></li>
<li id="menu-item-137" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-137"><a href="../category/yaptest/index.html"><span>Yaptest</span></a></li>
<li id="menu-item-134" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-134"><a href="../category/cheat-sheet.html"><span>Cheat Sheets</span></a></li>
<li id="menu-item-135" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-135"><a href="../category/contact.html"><span>Contact</span></a></li>
</ul>    <div class="clear"><!-- --></div>
				</div>
			</div>
			<!-- /main NAVIGATION -->
			<div class="clear"></div>


			<!-- CONTENT -->
			<div id="content">
	<!-- Start: Left Panel -->
	<div class="content">

	
		<div class="post-27 post type-post status-publish format-standard hentry category-blog tag-windows2008" id="post-27">
			<h1>A Quick Look at Windows 2008 Server Beta</h1>

			<div class="entryContent">
				<p>I recently installed Windows 2008 Beta in a VMWare Machine to see what Microsoft have in store for us.  Being a pentester,  I mainly looked at the default security setting, so don&#8217;t go expecting a review of the shiney new GUI&#8230;<br />
<span id="more-27"></span></p>
<h3>What was Tested?</h3>
<p>I installed  <a href="http://www.microsoft.com/downloads/details.aspx?familyid=d694d4cc-0681-41b5-b02e-012be18f8b71">Windows 2008 Server RC0 Standard Edition (32-bit)</a> Build 6001 in <a href="http://www.vmware.com/download/server/">VMWare Server 1.0.4-56528</a>.  I configured VMWare to expect a Vista guest as there&#8217;s not explicit 2008 support just yet.</p>
<p>Once installed, I basically poked around a bit, looking at security-related settings that might be of interest to pentesters.</p>
<p><strong>Installation Process</strong></p>
<p>The install went pretty smoothly: next-next-install style.  The only hicup was needing to install the VMWare Tools before the network connection would work.</p>
<p>You have to change your password before logging on for first time.  I&#8217;d like to figure out what the password was before it was changed.  Unfortuantely, as the network wasn&#8217;t configured I wasn&#8217;t able to log in remotely.  My guess would be that the password is blank and that remote users can&#8217;t use blank passwords (making it secure by default).  It&#8217;d be nice to verify this, though.</p>
<p><strong>Network Footprint</strong></p>
<p>How susceptible is this thing to remote attacks out-of-the-box?  Well, not very&#8230;</p>
<p>After you&#8217;ve got the network working, it will automatically DHCP.  Since production servers generally don&#8217;t DHCP, I didn&#8217;t dwell on this.  Next you&#8217;ll notice that the host-based Firewall is on by default.  No UDP, no TCP, no ICMP, nothing.</p>
<p>I <a href="http://www.nta-monitor.com/tools/arp-scan/">fingerprinted</a> it using ARP and the stack looks like Linux or Vista:</p>
<pre>$ sudo arp-fingerprint -o '-I vmnet1' 10.0.0.0
10.0.01   01010100000     Linux 2.2, 2.4, 2.6, Vista</pre>
<p>IPv6 is enabled by default.  This might be an interesting area to investigate, but I haven&#8217;t done so yet.  Presumably it will auto-configure and presumably the Firewall will protect it.  It&#8217;s worth checking at some point, though.</p>
<p>Next, I disabled the Firewall  to check what an unfiltered box would look like from a network perspective.  I began by turning off the Firewall service in services.msc.  This doesn&#8217;t work.  You need to leave the service running and disable it from control panel &#8211; otherwise it fails safe and continues to filter traffic.  Quite smart really &#8211; though not what I expected.</p>
<p>Here are the services bound to all interfaces (0.0.0.0):</p>
<p>ICMP: Echo,Timestamp</p>
<p>TCP ports (IPv4 and IPv6): 139, 445, 49152, 49153, 49154, 49155, 49156</p>
<p>UDP ports: 123, 500, 5355</p>
<p>These are bound to the LAN IP only: 137, 138</p>
<p>It&#8217;s interesting to note that UDP scan are very SLOOWWW against 2008.  This is very different to 2000, 2003, XP where boxes were a dream to port scan if they weren&#8217;t running a host-based Firewall.  Windows 2008 is rate-limiting its ICMP Port Unreachables.  This is pretty normal among other OSs and make pentesters jobs harder. 🙁</p>
<p>The newer TCP and UDP services (5355, 49152-49156) will be important to understand as 2008 gets rolled out.  Vista also has similar ports open.  I&#8217;ve not looked at Vista much, but Symantac have written a <a href="http://www.symantec.com/avcenter/reference/ATR-VistaAttackSurface.pdf">very good paper</a> on the Vista attack surface.   They have a nice description of the additional ports.</p>
<p>Here&#8217;s the banner you get when you connect with smbclient:</p>
<p>$ smbclient //10.0.0.1/c$ -U%<br />
Domain=[WORKGROUP] OS=[Windows Server (R) 2008 Standard 6001 Service Pack 1, v.275] Server=[Windows Server (R) 2008 Standard 6.0]</p>
<p>I&#8217;m not sure why &#8220;Service Pack 1&#8221; appears in the banner.  Odd for an RC0 release.</p>
<p><strong>Windows Services</strong></p>
<p>45 Windows services are started by default.  Note that this is for a server that isn&#8217;t running a Web server, FTP server, or any other kind of network service.</p>
<p>I wonder which ones are acutally needed.  I guess most people will simply leave them all enabled.</p>
<p><strong>Dumping Password Hashes</strong></p>
<p>The good news (well bad news if you&#8217;re a pentester) is that use of LANMAN hashes is disabled by default: Windows will not store the LANMAN hash of your password.  This is going to make cracking passwords much, much more difficult in future.</p>
<p>Don&#8217;t get me wrong, I&#8217;m not saying that NTLM password hashes are super-secure; I&#8217;m just saying that they&#8217;re much more secure than LANMAN hashes (they can be longer than 7 chars and are case sensitive for a start).</p>
<p>It&#8217;s probably worth getting a good set of <a href="http://www.freerainbowtables.com/en/tables/ntlm/">rainbow tables</a> if you haven&#8217;t already.</p>
<p><a href="http://www.security-hacks.com/2007/05/07/pwdumpx-windows-encrypted-password-retrieveal">PwdumpX</a> v1.0 worked well:</p>
<pre>C:&gt; pwdump 127.0.0.1 + +</pre>
<p>Pwdump2 doesn&#8217;t work.  This is not a great surprise since it no longer works on up-to-date XP and 2003.  However, the good news is that it doesn&#8217;t crash 2008!  Good news for pentesters and pentestees alike.</p>
<p>PwdumpX also dumps the LSA secrets.  This showed something that looks vaguely interesting.  I initially set my password to &#8220;root&#8221; after installation.  I later found the string &#8220;ROOT#123&#8221; under DefaultPassword in the LSA secrets.  Is this a coicidence, or is my password stored in the DefaultPassword field?:</p>
<p><img title="2008-root" src="https://pentestmonkey.net/2008-root.png" alt="2008-root" /></p>
<p>Upon changing my password the DefaultPassword did not change.  This is good news as even if your initial password is saved (as it seems to be in my case), subsequent passwords are not saved in the same way.  I came across <a href="http://seclists.org/fulldisclosure/2006/May/0119.html">this post</a> talking about a more serious version of this problem on Windows XP.</p>
<p><strong>User Accounts</strong></p>
<p>Nothing interesting here:</p>
<p>Administrator<br />
Guest (disabled)</p>
<p><strong>Shares</strong></p>
<p>The default shares are what you&#8217;d expect:</p>
<ul>
<li>c$</li>
<li>admin$</li>
<li>ipc$</li>
</ul>
<p><strong>Default Tools</strong><br />
Some tools NOT installed by default:</p>
<ul>
<li>tftp</li>
<li>rcp</li>
<li>telnet</li>
</ul>
<p>This will make post-exploitation activity a bit more painful.  ftp.exe is still present though and Read &amp; Execute permissions are granted to the Users group.</p>
<h3>Misc Security Settings</h3>
<p>Password policy:<br />
No password complexity<br />
No password history<br />
No account lockout</p>
<p>No auditing</p>
<p>Everyone can access from network</p>
<p><strong>Optional Services</strong><br />
I haven&#8217;t looked much at IIS or any of the other services yet.  One thing caught my eye about Terminal Services, though: It&#8217;s clearly explained at install time that two way of setting up Terminal Services authentication:</p>
<ul>
<li>The old way which was vulnerable to Man In The Middle attacks (the attack that <a href="http://www.oxid.it/cain.html">Cain</a> implements)</li>
<li>The new way that authenticates using SSL certs before you log on with usernames or passwords.</li>
</ul>
<p>I think I&#8217;m right in saying that the secure version is already available on earlier versions of Windows.  However, it good see security information being made available at install time.  Maybe future pentests will find less poorly configured Terminal Servers.</p>
<h3>In Summary</h3>
<p>Windows 2008 Server seems significantly more secure than Windows 2003 Server by default.  Pentesting is going to get harder&#8230;</p>
                <div class="clear"></div>
								<p class="postmeta"><span class="tags"><a href="../tag/windows2008.html" rel="tag">windows2008</a></span></p>				<p class="postmeta"><span class="cats"><a href="../category/blog/index.html" rel="category tag">Blog</a></span></p>
								
			<p></p>
		
			<div class="navigation2">
				<div class="alignright prev"><a href="../index.html%3Fp=26.html" rel="prev">Yaptest Update: v0.0.6</a></div>
				<div class="alignleft next"><a href="../index.html%3Fp=85.html" rel="next">Postgres SQL Injection Cheat Sheet</a></div>
			</div>		

			</div>
		</div>

	
<!-- You can start editing here. -->


			<!-- If comments are open, but there are no comments. -->

	 
<p></p>
<br />


	<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="../index.html%3Fp=27.html#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://pentestmonkey.net/wp-login.php?redirect_to=https%3A%2F%2Fpentestmonkey.net%2Fblog%2Fquick-look-at-win2k8">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	




	
	</div>
				<!-- sidebar -->
				<div class="sideBar">
					
					<div class="nav">
						<div class="bFrameT"><i></i></div>
	<form method="get" id="searchform" action="../index.html" class="searchForm">
	<p><input type="text" value="" name="s" id="s" class="field" />
	<input type="image" src="../wp-content/themes/baza-noclegowa/images/search.gif" alt="" title="Search" id="searchsubmit" class="btn" /></p>
</form>
<h3><span>Categories</span></h3>
			<ul>
					<li class="cat-item cat-item-5"><a href="../category/blog/index.html">Blog</a> (78)
</li>
	<li class="cat-item cat-item-39"><a href="../category/cheat-sheet.html">Cheat Sheets</a> (10)
<ul class='children'>
	<li class="cat-item cat-item-40"><a href="../category/cheat-sheet/shells.html">Shells</a> (1)
</li>
	<li class="cat-item cat-item-8"><a href="../category/cheat-sheet/sql-injection.html">SQL Injection</a> (7)
</li>
</ul>
</li>
	<li class="cat-item cat-item-7"><a href="../category/contact.html">Contact</a> (2)
</li>
	<li class="cat-item cat-item-3"><a href="../category/site-news.html">Site News</a> (3)
</li>
	<li class="cat-item cat-item-4"><a href="../category/tools/index.html">Tools</a> (17)
<ul class='children'>
	<li class="cat-item cat-item-14"><a href="../category/tools/audit.html">Audit</a> (3)
</li>
	<li class="cat-item cat-item-16"><a href="../category/tools/misc.html">Misc</a> (7)
</li>
	<li class="cat-item cat-item-13"><a href="../category/tools/user-enumeration.html">User Enumeration</a> (4)
</li>
	<li class="cat-item cat-item-15"><a href="../category/tools/web-shells.html">Web Shells</a> (3)
</li>
</ul>
</li>
	<li class="cat-item cat-item-1"><a href="../category/uncategorized.html">Uncategorized</a> (3)
</li>
	<li class="cat-item cat-item-6"><a href="../category/yaptest/index.html">Yaptest</a> (15)
<ul class='children'>
	<li class="cat-item cat-item-12"><a href="../category/yaptest/front-end.html">Front End</a> (1)
</li>
	<li class="cat-item cat-item-9"><a href="../category/yaptest/installing.html">Installing</a> (2)
</li>
	<li class="cat-item cat-item-11"><a href="../category/yaptest/overview.html">Overview</a> (2)
</li>
	<li class="cat-item cat-item-10"><a href="../category/yaptest/using.html">Using</a> (8)
</li>
</ul>
</li>
			</ul>

						
						<div class="bFrameB"><i></i></div>
					</div>
					
				</div>
				<!-- /sidebar -->	
				</div>
				<!-- /content -->
				
			</div>
			<!-- /CONTENT -->	
			
		
		<!-- bottom NAVIGATION -->
		<div id="bottomNav">
		</div>
		<!-- /bottom NAVIGATION -->
		
		<!-- FOOTER -->
		<div id="footer">
		<p class="footer-menu">
         <ul class="menu"></ul>        </p>
			
<div class="credits">Powered by <a href="http://wordpress.org/">WordPress</a>. Design: <a href="http://www.baza-noclegowa.pl/">Baza Noclegowa</a>.</div>
			
		</div>
		<!-- /FOOTER -->
	</div>
		<script type='text/javascript' src='../wp-includes/js/wp-embed.min.js%3Fver=5.8.3' id='wp-embed-js'></script>
</body>
</html>
