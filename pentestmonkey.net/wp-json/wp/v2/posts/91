{"id":91,"date":"2008-03-27T21:51:51","date_gmt":"2008-03-27T21:51:51","guid":{"rendered":"http:\/\/pentestmonkey.net\/?p=91"},"modified":"2011-08-20T15:50:58","modified_gmt":"2011-08-20T15:50:58","slug":"yaptest-mac-install-notes","status":"publish","type":"post","link":"https:\/\/pentestmonkey.net\/yaptest\/installing\/yaptest-mac-install-notes","title":{"rendered":"Installing Yaptest on Mac"},"content":{"rendered":"<p>Deanx gave gave me some very useful hints on how to get yaptest working on Mac.<br \/>\n<!--more--><\/p>\n<h2>Install Macports<\/h2>\n<p>If you haven&#8217;t done so already, you&#8217;ll need to install <a href=\"http:\/\/www.macports.org\/\">MacPorts<\/a>.<\/p>\n<h2>Install postgres<\/h2>\n<p>Next, install PostgreSQL v8.0.x:<\/p>\n<pre>port install postgresql80-server<\/pre>\n<p>It is possible to get yaptest working on Postgres 8.2+, but the solution isn&#8217;t documented here.<\/p>\n<h2>Install PERL Database Drivers<\/h2>\n<p>Install PERL&#8217;s Postgres DBI driver:<\/p>\n<pre>port install p5-class-dbi-pg<\/pre>\n<p>This will pull in postgres 8.3 as a dependency unfortunately. This isn&#8217;t what we want. We need version 8.0. Don&#8217;t use 8.3 even if it&#8217;s installed for you.<\/p>\n<h2>Switch to the &#8220;Ports&#8221; Version of PERL<\/h2>\n<p>Unhappily, all the PERL scripts in yaptest are hard-coded to use \/usr\/bin\/perl.\u00a0 However, the ports version is in \/opt\/local\/bin\/perl.\u00a0 The following dirty workaround will fix the problem, but I&#8217;d like a cleaner solution:<\/p>\n<pre># cd \/usr\/bin\/<\/pre>\n<pre># mv perl perl-old<\/pre>\n<pre># ln -s \/opt\/local\/bin\/perl<\/pre>\n<h2>Use the Mac Version of the Install Scripts<\/h2>\n<p>Version 0.0.9 of yaptest introduced some Mac-friendly install scripts:<\/p>\n<pre># make databasemac<\/pre>\n<pre># make installmac<\/pre>\n<h2>\u00a0Building bannergrab<\/h2>\n<p>Apparently this should fix your compile problems on mac:<\/p>\n<p>gcc -lssl -L\/opt\/local\/lib -I\/opt\/local\/includes -lcrypto -o bannergrab bannergrab.c<\/p>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<p><em>Everything below here should no longer be required.\u00a0 It&#8217;s left here just incase someone needs it&#8230;<\/em><\/p>\n<p>&nbsp;<\/p>\n<h2>Symlink psql8 to psql<\/h2>\n<p>Under Mac the database client is called &#8220;psql8&#8221;, but on Linux its &#8220;psql&#8221;.\u00a0\u00a0 Change to the directory containing psql8 and run:<\/p>\n<pre># ln -s psql8 psql<\/pre>\n<h2>Add the postgres user to postgres<\/h2>\n<p>There&#8217;s no user called &#8220;postgres&#8221; by default like on Linux.\u00a0 Make one using the psql client:<\/p>\n<pre>su - postgresql80<\/pre>\n<pre>psql8 template1<\/pre>\n<pre>&gt; CREATE USER postgres;<\/pre>\n<p>NB: The postgres client is called psql8, not psql like on Linux. psql8 lives in \/usr\/local\/bin.<\/p>\n<h2>Fix &#8220;make database&#8221;<\/h2>\n<p>After you install you need to run &#8220;make database&#8221; as per the <a href=\"http:\/\/pentestmonkey.net\/projects\/yaptest\/yaptest-installation\/\">installation guide<\/a> .\u00a0 However, this doesn&#8217;t work as expected on Mac.\u00a0 Here are some notes to work round the problems you&#8217;ll encounter:<\/p>\n<h3>Postgres OS-level user<\/h3>\n<p>The user you&#8217;ll need to su to to install the database is &#8220;postgres80&#8221;, not &#8220;postgres&#8221; like on Linux.<\/p>\n<h3>&#8220;dropdb&#8221; and &#8220;createdb&#8221; commands<\/h3>\n<p>These command reside in \/opt\/local\/lib\/postgres80\/bin.\u00a0 This is not in your path, so all references to these commands fail.\u00a0 Add this dir to your path.<\/p>\n<h2>Fix &#8220;make install&#8221;<\/h2>\n<p>Change the PERLDIR in the Makefile:<\/p>\n<pre>PERLDIR=\/opt\/local\/lib\/perl5\/site_perl<\/pre>\n<h2>Some Install-files I made Earlier<\/h2>\n<p>Actually, they were sent to me Deanx. \u00a0 This <a href=\"http:\/\/pentestmonkey.net\/tools\/yaptest\/yaptest-osx-install-scripts.tar.gz\">tar ball<\/a> has modified yaptest-db-install.sh, yaptest-install.sh and Makefile files which are apparently more friendly for Mac-users.<\/p>\n<p>&nbsp;<\/p>\n<p>I hope these notes help.\u00a0 Let me know if I&#8217;ve missed anything (pentestmonkey aatt pentestmonkey dot net).<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Deanx gave gave me some very useful hints on how to get yaptest working on Mac.<\/p>\n","protected":false},"author":3,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[9],"tags":[94,69],"_links":{"self":[{"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/posts\/91"}],"collection":[{"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/users\/3"}],"replies":[{"embeddable":true,"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/comments?post=91"}],"version-history":[{"count":1,"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/posts\/91\/revisions"}],"predecessor-version":[{"id":380,"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/posts\/91\/revisions\/380"}],"wp:attachment":[{"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/media?parent=91"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/categories?post=91"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/pentestmonkey.net\/wp-json\/wp\/v2\/tags?post=91"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}